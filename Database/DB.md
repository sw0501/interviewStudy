# 데이터베이스 면접 빈출

---

## 질문 목록

1. [데이터베이스의 특징](#1-데이터베이스의-특징)
2. [데이터베이스 언어(DDL, DML, DCL) 설명](#2-데이터베이스-언어ddl-dml-dcl-설명)

### 1. 데이터베이스의 특징

> 데이터베이스는 4가지 특징을 가진다.

1. 실시간 접근성 : 비정형적인 질의에 대하여 실시간 처리에 의한 응답이 가능하다.
2. 지속적인 변화 : 새로운 데이터의 삽입, 삭제, 갱신을 통해 항상 최신의 데이터를 유지한다.
3. 동시 공용 : 다수의 사용자가 동일한 데이터를 이용할 수 있어야 한다.
4. 내용에 의한 참조 : 사용자가 질의한 쿼리문에 해당하는 내용을 바탕으로 데이터를 조회한다.

### 2. 데이터베이스 언어(DDL, DML, DCL) 설명

> 데이터베이스 언어는 크게 DDL, DML, DCL 3가지로 이루어져 있음

- DDL (Database Definition Language)

  > : 데이터베이스의 구조를 정의, 수정, 삭제하는 언어  
  > ex) CREATE, ALTER, DROP

- DML (Database Manipulation Language)

  > : 데이터베이스 자료의 검색, 삽입, 갱신, 삭제를 위한 언어  
  > ex) SELECT, UPDATE, DELETE, INSERT

- DCL (Database Control Lanuguage)
  > : 데이터에 대한 무결성 유지 및 병행 제어를 수행하기 위한 언어  
  > ex) REVOKE, GRANT, COMMIT, ROLLBACK  
  > 이 중 COMMIT, ROLLBACK은 트랜잭션 관리를 위한 언어라는 TCL로 불리기도 함

### 3. SELECT 쿼리의 수행 순서

1. FROM : 테이블 조회
2. ON : JOIN 조건 확인
3. JOIN : JOIN 진행
4. WHERE : 만들어진 테이블에 제약 조건 적용
5. GROUP BY : 공통 값 기준으로 그룹화
6. HAVING : 그룹화 된 행에 제약 조건 적용
7. SELECT : 조회할 데이터 컬럼 선택
8. DISTINCT : 중복 행 삭제
9. ORDER BY : 정렬 기준
10. LIMIT : 제한

### 4. 트리거 (Trigger)

- 특정 테이블에 대한 이벤트에 반응해 DML 문이 수행됐을 때 데이터베이스에서 자동으로 동작하도록 작성된 프로그램
- 사용자가 직접 호출하는 것이 아닌 데이터베이스에서 자동적으로 호출한다는 것이 가장 큰 특징

### 5. Index

- Index란 테이블 전체를 탐색하는 Full Scan과는 달리 이미 정렬되어 있는 인덱스를 검색하여 해당 자료의 테이블을 액세스하는 방법
- 장점
  > 인덱스는 데이터의 저장 성능을 희생하는 대신 검색 속도를 높이는 기능
- 단점
  > 인덱스는 항상 정렬된 상태를 유지해야하기 때문에 삽입, 삭제, 갱신 시 쿼리문 실행 속도가 느려진다.

### 5-1. Index 종류

- #### B+ Tree 인덱스
  - 자식 노드가 2개 이상인 B-Tree를 개선시킨 자료구조
  - B-Tree의 리프노드들을 LinkedList로 연결하여 순차검색을 용이하게 한다.
  - 검색 시 O(log2N)의 시간복잡도를 갖지만 일반적으로 사용
  - Hash에 비해 각 데이터간 비교가 가능하다
- #### Hash 인덱스
  - 컬럼의 값으로 생성된 해시를 기반으로 인덱스를 구현
  - 검색 시 시간복잡도가 O(1)
  - 부등호와 같은 비교를 통한 데이터 순차 검색이 불가능

### 6. 정규화

- 데이터베이스에 중복된 데이터가 존재하여 발생하는 이상 현상을 해결하기 위해 중복 데이터를 분리하는 방법

- 종류

  - 제1 정규형 (단일 도메인)
    : 테이블 컬럼이 원자 값을 갖도록 분해
  - 제2 정규형 (부분 종속 제거)
    : 기본키가 아닌 속성이 기본키에 완전 함수 종속이도록 분해
  - 제3 정규형 (이행적 종속 제거)
    : 이행적 함수 종속을 없애도록 분해
  - BCNF 정규형 (모든 결정자가 후보키)
    : X -> Y 가 성립할 때 모든 결정자 X가 후보키가 되도록 분해
  - 제4 정규형 (다치 종속 제거)
  - 제5 정규형 (조인 종속 제거)

- 장점

  - 데이터베이스 변경 시 이상현상이 발생하는 문제 해결
  - 구조 확장 시 일부만 변경해도 됨

- 단점
  - JOIN 연산이 많아짐

### 역정규화란?

- 정규화의 반대 과정으로 과도한 JOIN 연산으로 인한 성능 저하를 막기 위해 중복을 허용하는 식으로 DB 구조를 변경하는 것

### 이상 현상 종류

- 테이블을 잘못 설계하여 데이터 삽입, 삭제, 수정 시 생기는 논리적 오류
  1. 삽입 이상 : 자료를 삽입할 때 특정 속성에 해당하는 값이 없어 NULL을 입력해야 하는 현상
  2. 갱신 이상 : 중복 데이터 중 일붐나 수정되어 데이터 무결성이 깨지는 현상
  3. 삭제 이상 : 정보 삭제 시 의도치 않은 다른 정보까지 삭제되는 현상

### SQL 인젝션

- 공격자가 악의적인 의도를 갖는 SQL 구문을 삽입하여 데이터베이스를 비정상적으로 조작하는 코드 인젝션 공격 기법

### SQL 인젝션 막는 방법

- PreparedStatement 사용하면 방지 가능
- 입력값 유효성 검증

### RDBMS와 NoSQL 차이

- #### RDBMS
  - 모든 데이터를 2차원 테이블 형태로 표현
  - 장점 : 스키마에 맞춰 데이터를 관리하기 때문에 데이터 정합성 보장
  - 단점 : 시스템이 커질수록 쿼리가 복잡해지고 성능 저하, Sclae-out 어려움
- #### NoSQL
  - 데이터간 관계를 정의하지 않고 스키마가 없어 자유롭게 데이터 관리
  - 장점 : 스키마 없이 Key-Value 형태로 데이터 관리 가능
  - 단점 : 데이터 중복 발생 및 중복 데이터가 변경될 경우 수정을 모든 컬렉션에서 수행

### 각각 어느 경우에 적합한가

- #### RDBMS
  - 데이터 구조가 명확하고 변경 될 여지가 없는 경우, 스키마 중요한 경우
  - 중복 데이터가 없기 때문에 데이터가 자주 변경되는 경우에 사용
- #### NoSQL
  - 정확한 데이터 구조가 없고 데이터 구조가 자주 확장 변경되는 경우
  - Update가 자주 발생하지 않는 경우에 사용, Scale-out 고려하는 경우

### 트랜잭션

- 작업들을 모두 처리하거나 처리하지 못한 경우 이전 상태로 복구하여 일부만 적용되는 현상이 발생하지 않게 만들어주는 기능
- Commit, Rollback

### 트랜잭션의 특성 설명

- Atomic : 모두 실행되거나, 실행되지 않아야 함
- Consistency : 실행이 완료되면 일관된 상태 유지
- Isolation : 트랜잭션이 실행되는 동안 다른 트랜잭션이 접근 못함
- Durability : 한번 실행이 되면 영구적으로 데이터를 보관해야됨

### DB 락

- 공유락 : 트랜잭션이 읽기 할 때 사용 같은 공유락 끼리는 동시 접근 가능
- 베타락 : 데이터 변경 시 사용, 트랜잭션이 완료될 때까지 유지하며 베타락이 끝나기 전까지는 어떠한 접근도 허용 X

### ES 키워드 검색과 RDBMS LIKE 검색 차이

- ES는 동의어나 유의어 검색 및 비정형 데이터 색인과 역인덱스 방식으로 매우 빠르게 검색 가능
- RDBMS는 단순 텍스트 매칭만 제공하여 유의어 같은 검색 불가능

### Optimizer

- SQL을 가장 빠르고 효율적으로 수행할 최적의 처리 방식을 만들어주는 DBMS 내부 엔진

### DB 튜닝

- DB 구조나 쿼리 등을 조정하여 DB 시스템 성능을 개선하는 작업

1. DB 설계 튜닝 (반정규화)
2. DBMS 튜닝 (Cache 크기)
3. SQL 튜닝

### Inner Join Outer Join

- Inner Join : 교집합
- Outer Join : 합집합

### Group by 역할

- 특정 칼럼을 기준으로 연산 결과를 집계

### Delete, Truncate, Drop 차이

- DELETE : 데이터를 지우지만 테이블 용량은 줄어들지 않고 원하는 데이터만 골라서 지울 수 있음
- Truncate : 전체 데이터를 전부 지우고 테이블 용량도 줄임, ROLLBACK 불가
- DROP : 테이블 자체를 완전히 삭제하는 방식, 삭제 후 되돌릴 수 없음.

### DB 클러스터링과 리플리케이션의 차이

- 클러스터링 : 여러 개 DB를 수평적인 구조로 구축 (동기)
  - 장점
    - DB 데이터 동기화
    - 다른 DB가 죽어도 시스템 운영 가능
    - DB 부하를 분산 가능
  - 단점
    - 저장소 하나를 공유하면 병목 현상 발생 가능
- 레플리케이션 : 여러 개 DB를 수직적인 구조로 구축 (비동기)
  - 장점
    - DB 요청의 대부분이 읽기 작업이기 때문에 성능 향상 가능
  - 단점
    - 데이터 동기화가 보장되지 않음

### 커넥션 풀

- 커넥션을

### 출처

- [신입 개발자 기술면접 질문 정리 - 데이터베이스](https://dev-coco.tistory.com/158)
